subs = {'PREK_1112','PREK_1676','PREK_1691','PREK_1715','PREK_1762',...
    'PREK_1901','PREK_1916','PREK_1951','PREK_1964','PREK_1887','PREK_1939',...
    'PREK_1505','PREK_1868','PREK_1208','PREK_1271','PREK_1372','PREK_1382',...
    'PREK_1673','PREK_1921','PREK_1936','PREK_1869','PREK_1443','PREK_1812',...
    'PREK_1714','PREK_1391','PREK_1293','PREK_1790','PREK_1878','PREK_1210',...
    'PREK_1706','PREK_1768','PREK_1401','PREK_1490','PREK_1818','PREK_1751',...
    'PREK_1103','PREK_1184', 'PREK_1798','PREK_1302','PREK_1460','PREK_1110','PREK_1756',...
    'PREK_1966','PREK_1750','PREK_1940','PREK_1262','PREK_1113','PREK_1241'};

hems = {'lh','rh'};
labels = {'FG3','FG4'};

% first convert the cyto rois from fsaverage to individual surfaces 
for h=1:2
    for l = 1:2
        for s=1:length(subs)
            cmd = ['cd /mnt/disks/scratch/freesurferRecon;'...
                'mri_label2label \' ...
                '--srcsubject fsaverage \' ...
                '--srclabel fsaverage/label/MPM_',hems{h},'.',labels{l},'.label \'...
                '--trgsubject ',subs{s},' \' ...
                '--trglabel ',subs{s},'/label/MPM_',hems{h},'.',labels{l},'.label \' ...
                '--hemi ',hems{h}, ' \' ...
                '--regmethod surface']
            
            system(cmd)
        end
    end
end

% next convert labels to nifti rois.

for h=1:2
    for l=1:2
        for s = 1:length(subs)
            cmd = ['cd ', '/mnt/disks/scratch/freesurferRecon/',subs{s},';'...
                'mri_label2vol \'...
                '--label /mnt/disks/scratch/freesurferRecon/',subs{s},'/label/MPM_',hems{h},'.',labels{l},'.label \'...
                '--temp /mnt/disks/scratch/PREK_Analysis/data/',subs{s},'/ses-pre/t1/t1_acpc.nii.gz \'...
                '--reg /mnt/disks/scratch/freesurferRecon/',subs{s},'/surf/register.dat \'...
                '--fillthresh .5 \'...
                '--o /mnt/disks/scratch/PREK_Analysis/data/',subs{s},'/fsROIs/',hems{h},'_',labels{l},'.nii.gz']
            
            system(cmd)
        end
    end
end
